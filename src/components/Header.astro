---
import { getTranslations, DEFAULT_LANGUAGE } from '../i18n/translations';
import { ThemeToggle } from '../react/ThemeToggle';

interface Props {
  currentLang: string;
}

const { currentLang } = Astro.props;
const t = getTranslations(currentLang);


// Create proper i18n links
const getLocalizedPath = (locale: string) => {
  if (locale === DEFAULT_LANGUAGE) return '/';
  return `/${locale}`;
};

const toggleTheme = () => {
  const currentTheme = localStorage.getItem('theme') || document.documentElement.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
}
---

<header class="absolute top-0 left-0 right-0 border-(--border-color) z-100">
  <nav class="container mx-auto px-8 py-4">
    <div class="flex justify-between items-center">
      <!-- Simple I+M logo -->
      <!-- <svg class="dark:text-white" width="48" height="48" viewBox="0 0 8 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 0.909046H1.32834L3.99503 4.99996L6.67166 0.909046H8V9.09087H6.95887V2.8746H6.86911L4.49565 6.36359H3.49441L1.13089 2.8746H1.04113V9.09087H0V0.909046Z" fill="currentColor"/>
        <path d="M4.5056 2.09086V10.2727H3.50435V2.09086H4.5056Z" fill="currentColor"/>
        <path d="M3.50435 -8.87513e-05H4.5056V0.909002H3.50435V-8.87513e-05Z" fill="currentColor"/>
      </svg> -->

      <!-- <svg class="dark:text-white" width="64" height="64" viewBox="0 0 8 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 1.01911C0 0.908658 0.0895431 0.819115 0.2 0.819115H1.19306C1.27478 0.819115 1.34828 0.86883 1.37869 0.944678L3.00488 5.00009H5.00488L6.62145 0.945052C6.65177 0.869007 6.72537 0.819115 6.80723 0.819115H7.8C7.91046 0.819115 8 0.908658 8 1.01911V8.80093C8 8.91139 7.91046 9.00093 7.8 9.00093H7.15887C7.04841 9.00093 6.95887 8.91139 6.95887 8.80093V2.84591C6.95887 2.81209 6.93145 2.78467 6.89762 2.78467C6.87955 2.78467 6.8624 2.79265 6.85076 2.80648L5.00488 5.00009H3.00488L1.14926 2.80638C1.13761 2.79261 1.12048 2.78467 1.10244 2.78467C1.06858 2.78467 1.04113 2.81212 1.04113 2.84598V8.80093C1.04113 8.91139 0.95159 9.00093 0.841134 9.00093H0.2C0.089543 9.00093 0 8.91139 0 8.80093V1.01911Z" fill="currentColor"/>
        <path d="M4.3055 2.00093C4.41599 2.00093 4.50555 2.09053 4.5055 2.20103L4.50488 3.50009L4.50557 9.98273C4.50559 10.0932 4.41604 10.1828 4.30557 10.1828H3.70437C3.5939 10.1828 3.50436 10.0932 3.50437 9.98274L3.50488 3.50009L3.50442 2.201C3.50438 2.09052 3.59394 2.00093 3.70442 2.00093H4.3055Z" fill="currentColor"/>
        <path d="M3.50462 0.499734C3.50476 0.223696 3.72907 0 4.00511 0C4.28125 0 4.5056 0.223858 4.5056 0.5C4.5056 0.776142 4.28125 1 4.00511 1C3.72886 1 3.50447 0.77598 3.50462 0.499734Z" fill="currentColor"/>
      </svg> -->



      <!-- <svg class="dark:text-white" width="64" height="64" viewBox="0 0 8 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.00119447 1.0435C-0.0134512 0.924266 0.0795742 0.819115 0.199703 0.819115H1.16669C1.24841 0.819115 1.32191 0.86883 1.35233 0.944678L2.97852 5.00009H4.97852L6.59509 0.945052C6.6254 0.869007 6.699 0.819115 6.78087 0.819115H7.74783C7.86786 0.819115 7.96086 0.924109 7.94637 1.04326L6.97852 9L6.93295 2.84577C6.9327 2.81195 6.90522 2.78467 6.8714 2.78467C6.85323 2.78467 6.836 2.79269 6.8243 2.80659L4.97852 5.00009H2.97852L1.12296 2.80647C1.11127 2.79264 1.09407 2.78467 1.07596 2.78467C1.04211 2.78467 1.01461 2.81201 1.01441 2.84586L0.978516 9L0.00119447 1.0435Z" fill="currentColor"/>
        <path d="M4.77842 2C4.88891 2 4.97847 2.0896 4.97842 2.2001L4.9778 3.49916L3.97852 10.5L2.97905 3.49916L2.97859 2.20007C2.97855 2.08959 3.0681 2 3.17859 2H4.77842Z" fill="currentColor"/>
        <path d="M3.47825 0.499734C3.4784 0.223696 3.7027 0 3.97874 0C4.25488 0 4.47923 0.223858 4.47923 0.5C4.47923 0.776142 4.25488 1 3.97874 1C3.70249 1 3.4781 0.77598 3.47825 0.499734Z" fill="currentColor"/>
      </svg> -->

      <!-- Spider-like logo -->
      <svg class="dark:text-white" width="64" height="72" viewBox="0 0 64 72" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.99995 14.0003C6.91473 13.3065 7.30107 13 8 13H15C15.4755 13 16.823 13.5587 17 14L26.0569 37.0914H31.8751H37.6933L47 14C47.1763 13.5576 48.5237 13.0003 49 13.0003H56.0002C56.6985 13.0003 57.0842 13.3072 56.9999 14.0004L41.9999 61L49.0645 24.5572C49.0631 24.3604 48.9032 24.2017 48.7064 24.2017C48.6007 24.2017 48.5005 24.2483 48.4324 24.3292L37.6933 37.0914H31.8751H26.0569L15.261 24.3285C15.1929 24.248 15.0929 24.2017 14.9875 24.2017C14.7906 24.2017 14.6306 24.3607 14.6294 24.5577L21.9999 61L6.99995 14.0003Z" fill="currentColor"/>
        <path d="M33.9997 8.00043C34.6425 8.00043 35.1636 8.64464 35.1633 9.43911L36 19.5706L31.9997 69L28 19.5706L28.8361 9.43846C28.8358 8.64413 29.3568 8 29.9997 8L33.9997 8.00043Z" fill="currentColor"/>
        <path d="M29 2.90754C29.0009 1.3015 30.3059 0 31.9119 0C33.5186 0 34.8239 1.30245 34.8239 2.90909C34.8239 4.51574 33.5186 5.81818 31.9119 5.81818C30.3047 5.81818 28.9991 4.51479 29 2.90754Z" fill="currentColor"/>
      </svg>


      <!-- <svg class="text-white" width="64" height="64" viewBox="0 0 8 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 0.909047H1.32834L3.00488 5.09002H5.00488L6.67166 0.909047H8V9.09087H6.95887V2.8746H6.86911L5.00488 5.09002H3.00488L1.13089 2.8746H1.04113V9.09087H0V0.909047Z" fill="currentColor"/>
        <path d="M4.5056 2.09086L4.50488 3.59002L4.5056 10.2727H3.50435L3.50488 3.59002L3.50435 2.09086H4.5056Z" fill="currentColor"/>
        <path d="M3.50435 0.454546C3.50435 0.203507 3.70786 0 3.9589 0H4.05105C4.30209 0 4.5056 0.203507 4.5056 0.454546C4.5056 0.705584 4.30209 0.909091 4.05105 0.909091H3.9589C3.70786 0.909091 3.50435 0.705584 3.50435 0.454546Z" fill="currentColor"/>
      </svg> -->

      <!-- <svg width="64" height="64" viewBox="0 0 9 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.5 0.909047H1.82834L3.50488 5.09002H5.50488L7.17166 0.909047H8.5L9 4L8.5 9.09087H7.45887L8 5L7.45887 2.8746H7.36911L5.50488 5.09002H3.50488L1.63089 2.8746H1.54113L1 5L1.54113 9.09087H0.5L0 4L0.5 0.909047Z" fill="currentColor"/>
        <path d="M5.0056 2.09086L5.00488 3.59002L5.0056 10.2727H4.00435L4.00488 3.59002L4.00435 2.09086H5.0056Z" fill="currentColor"/>
        <path d="M4.00435 0.454546C4.00435 0.203507 4.20786 0 4.4589 0H4.55105C4.80209 0 5.0056 0.203507 5.0056 0.454546C5.0056 0.705584 4.80209 0.909091 4.55105 0.909091H4.4589C4.20786 0.909091 4.00435 0.705584 4.00435 0.454546Z" fill="currentColor"/>
      </svg> -->

      <!-- <svg width="64" height="64" viewBox="0 0 9 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.311491 1.63973C0.379618 1.21857 0.743234 0.909047 1.16987 0.909047C1.52515 0.909047 1.8447 1.12519 1.97694 1.45495L3.43457 5.09002H5.43457L6.88328 1.45606C7.01495 1.12575 7.33464 0.909047 7.69022 0.909047C8.11644 0.909047 8.47971 1.21827 8.54777 1.63903L8.82291 3.3399C8.89317 3.77424 8.86343 4.21888 8.73594 4.64L7.38855 9.09087L7.87254 5.43202C7.91029 5.14663 7.89319 4.85666 7.82217 4.57769L7.40241 2.929C7.39426 2.897 7.36544 2.8746 7.33242 2.8746C7.3111 2.8746 7.29088 2.88401 7.27716 2.90032L5.43457 5.09002H3.43457L1.58224 2.90021C1.5685 2.88397 1.5483 2.8746 1.52703 2.8746C1.49396 2.8746 1.46511 2.89703 1.45695 2.92907L1.03721 4.57769C0.966182 4.85666 0.949084 5.14663 0.986835 5.43202L1.47082 9.09087C1.46732 9.06438 1.46165 9.03821 1.45388 9.01265L0.124647 4.64117C-0.00362553 4.21932 -0.0337075 3.77371 0.0367022 3.33845L0.311491 1.63973Z" fill="currentColor"/>
        <path d="M4.43463 2.09086C4.71109 2.09086 4.93518 2.31505 4.93504 2.59152L4.93457 3.59002L4.42969 10.2727L3.93457 3.59002L3.93422 2.59146C3.93412 2.31502 4.15819 2.09086 4.43463 2.09086Z" fill="currentColor"/>
        <path d="M3.93404 0.454546C3.93404 0.203507 4.13755 0 4.38858 0H4.48074C4.73178 0 4.93528 0.203507 4.93528 0.454546C4.93528 0.705584 4.73178 0.909091 4.48074 0.909091H4.38858C4.13755 0.909091 3.93404 0.705584 3.93404 0.454546Z" fill="currentColor"/>
      </svg> -->




      <div class="flex gap-4 items-center">
        <ThemeToggle t={t} client:only="react" />

        <div class="flex hidden gap-2 bg-[var(--card-bg)] rounded-lg p-1">
          <a
            href={getLocalizedPath('en')}
            class={`px-4 py-2 rounded-md cursor-pointer text-sm font-medium transition-all duration-200 no-underline ${
              currentLang === 'en'
                ? 'bg-[var(--accent-color)] text-white'
                : 'text-[var(--text-color)] hover:bg-[var(--bg-color)]'
            }`}
            aria-label="Switch to English"
          >
            EN
          </a>
          <a
            href={getLocalizedPath('uk')}
            class={`px-4 py-2 rounded-md cursor-pointer text-sm font-medium transition-all duration-200 no-underline ${
              currentLang === 'uk'
                ? 'bg-[var(--accent-color)] text-white'
                : 'text-[var(--text-color)] hover:bg-[var(--bg-color)]'
            }`}
            aria-label="Перемкнути на Українську"
          >
            UK
          </a>
          <a
            href={getLocalizedPath('pl')}
            class={`px-4 py-2 rounded-md cursor-pointer text-sm font-medium transition-all duration-200 no-underline ${
              currentLang === 'pl'
                ? 'bg-[var(--accent-color)] text-white'
                : 'text-[var(--text-color)] hover:bg-[var(--bg-color)]'
            }`}
            aria-label="Przełącz na Polski"
          >
            PL
          </a>
          <a
            href={getLocalizedPath('es')}
            class={`px-4 py-2 rounded-md cursor-pointer text-sm font-medium transition-all duration-200 no-underline ${
              currentLang === 'es'
                ? 'bg-[var(--accent-color)] text-white'
                : 'text-[var(--text-color)] hover:bg-[var(--bg-color)]'
            }`}
            aria-label="Cambiar a Español"
          >
            ES
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
