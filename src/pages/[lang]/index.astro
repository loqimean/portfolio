---
import Layout from '../../layouts/Layout.astro';
import MainPageContent from '../../components/MainPageContent.astro';
import { DEFAULT_LANGUAGE, getTranslations, type Language } from '../../i18n/translations';

export function getStaticPaths() {
  return [
    { params: { lang: 'uk' } },
    { params: { lang: 'pl' } },
    { params: { lang: 'es' } },
  ];
}

const { lang } = Astro.params;
const t = getTranslations(lang as Language);
const formspreeEndpoint = import.meta.env.PUBLIC_FORMSPREE_ENDPOINT || '';
const recaptchaSiteKey = import.meta.env.PUBLIC_RECAPTCHA_SITE_KEY || undefined;
const contactEmail = import.meta.env.PUBLIC_CONTACT_EMAIL || 'marynych.ivan@icloud.com';
const cvUrl = import.meta.env.PUBLIC_CV_FILE_PATH;
---

<Layout title={`${t.name} - Portfolio`} lang={lang || DEFAULT_LANGUAGE} metaDescription={t.index.metaDescription} withCrystal={true}>
  <MainPageContent t={t} hasContactForm={!!formspreeEndpoint} contactEmail={contactEmail} formspreeEndpoint={formspreeEndpoint} recaptchaSiteKey={recaptchaSiteKey} cvUrl={cvUrl} />
</Layout>
